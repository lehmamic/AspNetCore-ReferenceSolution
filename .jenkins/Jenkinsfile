// ------------------------------------------------------------------------------
// <auto-generated>
//
//     This code was generated.
//
//     - To turn off auto-generation set:
//
//         [JenkinsPipeline (AutoGenerate = false)]
//
//     - To trigger manual generation invoke:
//
//         nuke --generate-configuration Jenkins --host Jenkins
//
// </auto-generated>
// ------------------------------------------------------------------------------

pipeline {
  agent none
  triggers {
    pollSCM('* * * * *')
  }
  stages {
    stage('Checkout') {
      agent any
      steps {
        checkout scm
        stash name: 'source', includes: '**/*'
      }
    }
    stage('Test') {
      failFast true
      parallel {
        stage('BackendRestore') {
          agent any
          steps {
            unstash 'source'
            sh 'sh ./build.sh --target BackendRestore' --skip
          }
        }
        stage('FrontendInstall') {
          agent any
          steps {
            unstash 'source'
            sh 'sh ./build.sh --target FrontendInstall' --skip
          }
        }
      }
    }
    stage('Test') {
      failFast true
      parallel {
        stage('BackendCompile') {
          agent any
          steps {
            unstash 'source'
            sh 'sh ./build.sh --target BackendCompile' --skip
            stash name: 'backendcompile_196A8FB8', includes: '**/obj/**/*'
            stash name: 'backendcompile_63AE7AA4', includes: '**/bin/**/*'
          }
        }
        stage('FrontendBuild') {
          agent any
          steps {
            unstash 'source'
            sh 'sh ./build.sh --target FrontendBuild' --skip
          }
        }
      }
    }
    stage('Test') {
      failFast true
      parallel {
        stage('BackendTest') {
          agent any
          steps {
            unstash 'source'
            unstash 'backendtest_196A8FB8'
            unstash 'backendtest_63AE7AA4'
            sh 'sh ./build.sh --target BackendTest' --skip
          }
        }
        stage('FrontendTest') {
          agent any
          steps {
            unstash 'source'
            sh 'sh ./build.sh --target FrontendTest' --skip
          }
        }
      }
    }
    stage('Test') {
      failFast true
      parallel {
        stage('BackendPublish') {
          agent any
          steps {
            unstash 'source'
            unstash 'backendpublish_196A8FB8'
            unstash 'backendpublish_63AE7AA4'
            sh 'sh ./build.sh --target BackendPublish' --skip
          }
        }
        stage('FrontendPublish') {
          agent any
          steps {
            unstash 'source'
            sh 'sh ./build.sh --target FrontendPublish' --skip
          }
        }
      }
    }
    stage('BuildDockerImage') {
      agent any
      steps {
        unstash 'source'
        sh 'sh ./build.sh --target BuildDockerImage' --skip
      }
    }
  }
}
